<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Malla Abogacía Vertical</title>
  <style>
    body {
      background: linear-gradient(to bottom, #fde6fa, #f3e6fd);
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      color: #6c3483;
    }

    header {
      background: linear-gradient(90deg, #f9d2e6 0%, #e5d0fa 100%);
      text-align: center;
      padding: 24px 0;
      font-size: 2rem;
      font-weight: bold;
      color: #6c3483;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }

    .malla-container {
      display: flex;
      overflow-x: auto;
      padding: 32px;
      gap: 24px;
    }

    .anio {
      min-width: 220px;
      background: #fff0fa;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .anio h2 {
      text-align: center;
      font-size: 1.2rem;
      margin-bottom: 8px;
      color: #a64ca6;
    }

    .cuatrimestre {
      background: #fce7fa;
      border-radius: 10px;
      padding: 10px;
    }

    .cuatrimestre h3 {
      font-size: 1rem;
      margin-bottom: 8px;
      color: #9c27b0;
    }

    .materia {
      background: linear-gradient(135deg, #ffe6f0, #f0dbfc);
      border: 1px solid #e8d2f1;
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 8px;
      cursor: pointer;
      opacity: 0.5;
      transition: all 0.2s;
    }

    .materia.desbloqueada {
      opacity: 1;
      box-shadow: 0 0 4px #e6b8fa;
    }

    .materia.aprobada {
      text-decoration: line-through;
      background: #e9d6ff;
      color: #6e2ca9;
      opacity: 1;
    }

    .leyenda {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin: 16px;
      background: #fce7fa;
      padding: 10px 20px;
      border-radius: 10px;
    }

    .cuadro {
      width: 16px;
      height: 16px;
      display: inline-block;
      margin-right: 6px;
      border: 1px solid #b39ddb;
      border-radius: 4px;
    }

    .rosa { background: #ffd1eb; }
    .violeta { background: #d8b6ff; }
    .gris { background: #ececec; }

    .reset-btn {
      margin-left: auto;
      background: #e8c0ff;
      border: none;
      color: #6c3483;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>Malla Interactiva Abogacía</header>
  <div class="leyenda">
    <span><span class="cuadro rosa"></span> Desbloqueada</span>
    <span><span class="cuadro violeta"></span> Aprobada</span>
    <span><span class="cuadro gris"></span> Bloqueada</span>
    <button class="reset-btn" onclick="resetearMalla()">Reiniciar</button>
  </div>

  <div class="malla-container" id="mallaContainer"></div>

  <script>
    const materias = [
      { anio: 1, cuatri: 1, nombre: "Contenidos Transversales" },
      { anio: 1, cuatri: 1, nombre: "Historia del Pensamiento" },
      { anio: 1, cuatri: 1, nombre: "Teoría del Derecho" },
      { anio: 1, cuatri: 2, nombre: "Teoría del Estado" },
      { anio: 1, cuatri: 2, nombre: "Economía" },
      { anio: 1, cuatri: 2, nombre: "Destrezas I" },
      
      { anio: 2, cuatri: 1, id: "log", nombre: "Lógica", correl: ["ctcc", "hpj", "tdj"] },
      { anio: 2, cuatri: 1, id: "dp", nombre: "Derecho Privado: Teoría de la Rel. Juríd. y de la Persona", correl: ["ctcc", "tdj", "ne", "d1"] },
      { anio: 2, cuatri: 1, id: "dc", nombre: "Derecho Constitucional", correl: ["ctcc", "hpj", "te", "tdj"] },
      { anio: 2, cuatri: 2, id: "dpi", nombre: "Derecho Penal I Parte General", correl: ["dc"] },
      { anio: 2, cuatri: 2, id: "occ", nombre: "Obligaciones Civiles y Comerciales", correl: ["dp"] },
      { anio: 2, cuatri: 2, id: "ns", nombre: "Nociones de Sociología", correl: ["ctcc", "hpj", "te"] },

      { anio: 3, cuatri: 1, id: "cont", nombre: "Contratos", correl: ["occ"] },
      { anio: 3, cuatri: 1, id: "dpii", nombre: "Derecho Penal II Parte Especial", correl: ["dpi"] },
      { anio: 3, cuatri: 1, id: "opt1", nombre: "Optativa I", correl: [] },
      { anio: 3, cuatri: 2, id: "dp1", nombre: "Derecho Procesal I: Teoría General del Proceso y Proceso Penal", correl: ["dc", "dp", "dpii"] },
      { anio: 3, cuatri: 2, id: "den", nombre: "Derecho de la Empresa y los Negocios", correl: ["cont"] },
      { anio: 3, cuatri: 2, id: "dh", nombre: "Derechos Humanos", correl: ["dc"] },
      { anio: 3, cuatri: 2, id: "d2", nombre: "Destrezas II: Argumentación Oral y Escrita", correl: ["d1", "log", "ns"] },

      { anio: 4, cuatri: 1, id: "dsdc", nombre: "Derecho Societario y Derecho Cambiario", correl: ["den"] },
      { anio: 4, cuatri: 1, id: "dp2", nombre: "Derecho Procesal II: Proceso Civil y Comercial", correl: ["dp1", "occ"] },
      { anio: 4, cuatri: 1, id: "da", nombre: "Derecho Ambiental", correl: ["dc", "cont"] },
      { anio: 4, cuatri: 1, id: "opt2", nombre: "Optativa II", correl: [] },
      { anio: 4, cuatri: 2, id: "dr", nombre: "Derecho Reales", correl: ["dc", "cont"] },
      { anio: 4, cuatri: 2, id: "dcon", nombre: "Derechos del Consumidor", correl: ["dc", "cont"] },
      { anio: 4, cuatri: 2, id: "d3", nombre: "Destrezas III: Investigación Jurídica", correl: ["occ", "d2", "dpi"] },
      { anio: 4, cuatri: 2, id: "dtrs", nombre: "Derecho del trabajo y derecho de la seguridad social", correl: ["dc", "cont"] },

      { anio: 5, cuatri: 1, id: "fd", nombre: "Filosofía del Derecho", correl: ["dh", "ns"] },
      { anio: 5, cuatri: 1, id: "dfs", nombre: "Derecho de Familia y de las Sucesiones", correl: ["dr", "dp1"] },
      { anio: 5, cuatri: 1, id: "dt", nombre: "Derecho del Transporte", correl: ["den"] },
      { anio: 5, cuatri: 2, id: "dadm", nombre: "Derecho Administrativo", correl: ["dr", "dp2"] },
      { anio: 5, cuatri: 2, id: "opt3", nombre: "Optativa III", correl: [] },
      { anio: 5, cuatri: 2, id: "cq", nombre: "Concursos y Privilegios", correl: ["dsdc", "dp1"] },
      { anio: 5, cuatri: 2, id: "d4", nombre: "Destrezas IV: Habilidades para el Litigio", correl: ["d3", "cont", "dp1"] },

      { anio: 6, cuatri: 1, id: "dip", nombre: "Derecho Internacional Público y Política Exterior", correl: ["dh"] },
      { anio: 6, cuatri: 1, id: "dtf", nombre: "Derecho Tributario y Derecho Financiero", correl: ["dadm"] },
      { anio: 6, cuatri: 1, id: "opt4", nombre: "Optativa IV", correl: [] },
      { anio: 6, cuatri: 2, id: "opt5", nombre: "Optativa V", correl: [] },
      { anio: 6, cuatri: 1, id: "d5", nombre: "Destrezas V: Práctica Profesional Aplicada", correl: ["dfs", "dp2", "d4"] },
      { anio: 6, cuatri: 2, id: "dipi", nombre: "Derecho Internacional Privado", correl: ["dfs", "cq"] },
    ];

    const STORAGE_KEY = "malla_abogacia_vertical";

    function guardar(aprobadas) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(aprobadas));
    }

    function cargar() {
      const data = localStorage.getItem(STORAGE_KEY);
      return data ? JSON.parse(data) : [];
    }

    function resetearMalla() {
      if (confirm("¿Seguro que querés reiniciar tu progreso?")) {
        localStorage.removeItem(STORAGE_KEY);
        render();
      }
    }

    function render() {
      const container = document.getElementById("mallaContainer");
      container.innerHTML = "";
      const aprobadas = cargar();
      for (let anio = 1; anio <= 6; anio++) {
        const col = document.createElement("div");
        col.className = "anio";
        col.innerHTML = `<h2>${anio}º Año</h2>`;

        for (let cuatri = 1; cuatri <= 2; cuatri++) {
          const box = document.createElement("div");
          box.className = "cuatrimestre";
          box.innerHTML = `<h3>${cuatri}º Cuatrimestre</h3>`;
          const materiasCuatri = materias.filter(m => m.anio === anio && m.cuatri === cuatri);

          materiasCuatri.forEach(mat => {
            const div = document.createElement("div");
            div.className = "materia desbloqueada";
            if (aprobadas.includes(mat.nombre)) {
              div.classList.add("aprobada");
            }
            div.textContent = mat.nombre;
            div.onclick = () => {
              if (aprobadas.includes(mat.nombre)) {
                const i = aprobadas.indexOf(mat.nombre);
                aprobadas.splice(i, 1);
              } else {
                aprobadas.push(mat.nombre);
              }
              guardar(aprobadas);
              render();
            };
            box.appendChild(div);
          });

          col.appendChild(box);
        }
        container.appendChild(col);
      }
    }

    render();
  </script>
</body>
</html>

